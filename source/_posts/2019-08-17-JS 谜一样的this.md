---
title: JS è°œä¸€æ ·çš„thisï¼ˆæµè§ˆå™¨ä¸­ï¼‰
author: vear
avatar: https://cdn.jsdelivr.net/gh/vearvip/cdn@v0.0.9/img/avatar/avatar.webp
authorLink: /
authorAbout: ä¸€åªæ— è¶£çš„æ­»å®…
authorDesc: ä¸€åªæ— è¶£çš„æ­»å®…
categories: æŠ€æœ¯
date: 2019-08-17 10:42:34
comments: true
keywords: Sakura
description: æµè§ˆå™¨ä¸­å’Œåœ¨Node.jsä¸­thisæ˜¯ä¸ä¸€æ ·çš„,éœ€è¦æ³¨æ„
photos: https://cdn.jsdelivr.net/gh/vearvip/cdn@v0.0.9/img/article/æ—æ·±æ—¶è§é¹¿03.webp
---
# JS è°œä¸€æ ·çš„this
## JavaScript ä¸­çš„thisæ˜¯æ ¹æ®è¿è¡Œæ—¶çš„ç¯å¢ƒæ‰€å†³å®šçš„

### â‘ thisåœ¨å…¨å±€ä½œç”¨åŸŸä¸­
```js
foo = 'abc'
console.log(foo) // abc

var foo = 'def'
console.log(this.foo) // def
// è¿™é‡Œçš„thisæŒ‡çš„æ˜¯å…¨å±€å¯¹è±¡windowï¼ˆæµè§ˆå™¨ä¸­ï¼‰
```
- åœ¨æµè§ˆå™¨ä¸­ï¼ŒæŒ‡å‘windowå¯¹è±¡

### â‘¡thisåœ¨å‡½æ•°/å¯¹è±¡æ–¹æ³•ä¸­
```js
var boat = {
  size: 'normal',
  boatInfo: function() {
    console.log(this === boat, this.size)
  }
}

boat.boatInfo() // true, 'normal'

var bigBoat = {
  size: 'big'
}

bigBoat.boatInfo = boat.boatInfo
bigBoat.boatInfo() // false, 'big'
```
> é¦–å…ˆè¦æ˜ç™½ï¼Œåœ¨ä»»ä½•å‡½æ•°ä¸­ï¼Œthisçš„æŒ‡å‘éƒ½ä¸æ˜¯é™æ€çš„(static)ã€‚å®ƒæ€»æ˜¯åœ¨ä½ è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œä½†å°šæœªæ‰§è¡Œå‡½æ•°å†…éƒ¨ä»£ç å‰è¢«æŒ‡å®šã€‚å®é™…ä¸Šï¼Œthisæ˜¯ è¢«è°ƒç”¨çš„å‡½æ•°çš„çˆ¶ä½œç”¨åŸŸæä¾›çš„ã€‚

thisï¼ŒæŒ‡å‘è°ƒç”¨å®ƒæ‰€å±çš„é‚£ä¸ªå‡½æ•°çš„é‚£ä¸ªå¯¹è±¡
- å¦‚æœå‡½æ•°å·¦è¾¹æ˜¯ä¸€ä¸ªå¼•ç”¨,é‚£ä¹ˆå‡½æ•°é‡Œçš„thisæŒ‡å‘çš„å°±æ˜¯è¿™ä¸ªå¼•ç”¨
- å¦åˆ™thisæŒ‡å‘çš„å°±æ˜¯å…¨å±€å¯¹è±¡(æµè§ˆå™¨ -> window)

```js
function bar() {
  console.log(this)
}
bar()
// è¿™é‡Œï¼ŒthisæŒ‡å‘çš„æ˜¯å…¨å±€å¯¹è±¡ã€‚æˆ‘ä»¬å…ˆçœ‹å‡½æ•°çš„å·¦è¾¹ï¼Œæ²¡ä¸œè¥¿,
// é‚£ä¹ˆbarå±äºè°å‘¢ï¼Ÿbarå±äºå…¨å±€å¯¹è±¡ï¼Œæ‰€ä»¥thisæŒ‡å‘çš„å°±æ˜¯å…¨å±€å¯¹è±¡ã€‚

var foo = {
  baz: function() {
    console.log(this)
  }
}
foo.baz()
// è¿™é‡Œ,thisæŒ‡å‘çš„æ˜¯foo,å…ˆçœ‹å‡½æ•°å·¦è¾¹æ˜¯fooï¼Œæ‰€ä»¥bazé‡Œçš„thisæŒ‡å‘çš„å°±æ˜¯foo
```
ç”±äºjsä¸­Objectå’ŒFunctionæ˜¯å¼•ç”¨ç±»å‹ï¼Œæ‰€ä»¥åœ¨å¼•ç”¨å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œthisçš„æŒ‡å‘ä¹Ÿä¼šå‘ç”Ÿæ”¹å˜
```js
var foo = {
  baz: function() {
    console.log(this)
  }
}
foo.baz()

var anotherBaz = foo.baz
anotherBaz()
// thisæŒ‡å‘å…¨å±€å¯¹è±¡ï¼Œåœ¨æµè§ˆå™¨ä¸­è¿™ä¸ªå‡½æ•°ç›¸å½“äºwindow.anotherBaz()
```
åµŒå¥—åœ¨å¯¹è±¡é‡Œçš„thisçš„æŒ‡å‘
```js
var anum = 0

var foo = {
  anum: 10,
  baz: {
    anum: 20,
    bar: function() {
      console.log(this.anum)
    }
  }
}
foo.baz.bar();
// å‡½æ•°å·¦è¾¹æ˜¯baz,æ‰€ä»¥thiså°±æ˜¯foo.baz,
// this.anum = foo.baz.anum // 20

var hello = foo.baz.bar;
hello();
// å‡½æ•°å·¦è¾¹æ˜¯å•¥ä¹Ÿæ²¡æœ‰ï¼Œæ‰€ä»¥thisæŒ‡å‘å…¨å±€å¯¹è±¡ 
// this.anum = window.anum // 0
```
å€¼å¾—æ³¨æ„çš„æ˜¯ä¸‹é¢è¿™å‡ ç§ç”¨æ³•ï¼Œéƒ½ä¼šæ”¹å˜thisçš„æŒ‡å‘ã€‚
```js
var obj ={
  foo: function () {
    console.log(this)
  }
}

obj.foo() // obj
// æƒ…å†µä¸€
;(obj.foo = obj.foo)() // window
// æƒ…å†µäºŒ
;(false || obj.foo)() // window
// æƒ…å†µä¸‰
;(1, obj.foo)() // window
```
ä¸Šé¢ä»£ç ä¸­ï¼Œobj.fooå°±æ˜¯ä¸€ä¸ªå€¼ã€‚è¿™ä¸ªå€¼çœŸæ­£è°ƒç”¨çš„æ—¶å€™ï¼Œè¿è¡Œç¯å¢ƒå·²ç»ä¸æ˜¯objäº†ï¼Œè€Œæ˜¯å…¨å±€ç¯å¢ƒï¼Œæ‰€ä»¥thisä¸å†æŒ‡å‘obj

å¯ä»¥è¿™æ ·ç†è§£ï¼ŒJavaScript å¼•æ“å†…éƒ¨ï¼Œobjå’Œobj.fooå‚¨å­˜åœ¨ä¸¤ä¸ªå†…å­˜åœ°å€ï¼Œç§°ä¸ºåœ°å€ä¸€å’Œåœ°å€äºŒã€‚obj.foo()è¿™æ ·è°ƒç”¨æ—¶ï¼Œæ˜¯ä»åœ°å€ä¸€è°ƒç”¨åœ°å€äºŒï¼Œå› æ­¤åœ°å€äºŒçš„è¿è¡Œç¯å¢ƒæ˜¯åœ°å€ä¸€ï¼ŒthisæŒ‡å‘objã€‚ä½†æ˜¯ï¼Œä¸Šé¢ä¸‰ç§æƒ…å†µï¼Œéƒ½æ˜¯ç›´æ¥å–å‡ºåœ°å€äºŒè¿›è¡Œè°ƒç”¨ï¼Œè¿™æ ·çš„è¯ï¼Œè¿è¡Œç¯å¢ƒå°±æ˜¯å…¨å±€ç¯å¢ƒï¼Œå› æ­¤thisæŒ‡å‘å…¨å±€ç¯å¢ƒã€‚ä¸Šé¢ä¸‰ç§æƒ…å†µç­‰åŒäºä¸‹é¢çš„ä»£ç ã€‚
```js
// æƒ…å†µä¸€
(obj.foo = function () {
  console.log(this)
})()
// ç­‰åŒäº
(function () {
  console.log(this)
})()

// æƒ…å†µäºŒ
(false || function () {
  console.log(this)
})()

// æƒ…å†µä¸‰
(1, function () {
  console.log(this)
})()
```
å¦‚æœthisæ‰€åœ¨çš„æ–¹æ³•ä¸åœ¨å¯¹è±¡çš„ç¬¬ä¸€å±‚ï¼Œè¿™æ—¶thisåªæ˜¯æŒ‡å‘å½“å‰ä¸€å±‚çš„å¯¹è±¡ï¼Œè€Œä¸ä¼šç»§æ‰¿æ›´ä¸Šé¢çš„å±‚ã€‚
```js
var obj = {
  name: 'Hello',
  son: {
    foo: function() {
      console.log(this.name)
    }
  }
}

obj.son.foo() // undefined
```
æ­¤æ—¶çš„thisæŒ‡å‘çš„sonï¼Œsonæ²¡æœ‰nameå±æ€§ï¼Œå°±å½“ç„¶undefinedäº†
### â‘¢thisåœ¨æ„é€ å‡½æ•°å’Œç±»ä¸­
æ„é€ å‡½æ•°ä¸­çš„thisï¼ŒæŒ‡çš„æ˜¯å®ä¾‹å¯¹è±¡ã€‚
```js
var Obj = function (x) {
  this.x = x
  function sayHi() {
    console.log(this.x)
  }
}
Obj.prototype.sayHi = function () {
  console.log(this.x)
}
var obj1 = new Obj('Hello World!')
obj1.sayHi() // "Hello World!"
```
ç±»ä¸­çš„thisï¼ŒæŒ‡çš„æ˜¯å®ä¾‹å¯¹è±¡ã€‚
```js
class Obj {
  constructor(x) {
    this.x = x;
  }
  sayHi() {
    console.log(this.x)
  }
}
var obj1 = new Obj('Hello World!')
obj1.sayHi() // "Hello World!"
```
### â‘£thisåœ¨domäº‹ä»¶ä¸­
```html
<div id="test">ä»Šå¤©æ˜¯ä¸ªå¥½æ—¥å­</div>
<script>
var myElem = document.getElementById('test')
myElem.onclick = function() { 
  console.log(this.innerHTML) 
} 

myElem.onclick() // ä»Šå¤©æ˜¯ä¸ªå¥½æ—¥å­
</script>
ğŸ˜‘ğŸ˜¶ğŸ˜ğŸ˜£ğŸ˜¥ğŸ˜®ğŸ˜¯ğŸ˜ğŸ˜˜ğŸ˜—ğŸ˜™ğŸ˜š
<button onclick="this.style.display='none'">
  ç‚¹æˆ‘åæˆ‘å°±æ¶ˆå¤±äº†
</button>
```
## å‚è€ƒèµ„æ–™
[é˜®ä¸€å³° JavaScriptå…¥é—¨æ•™ç¨‹](http://wangdoc.com/javascript/oop/this.html)

[æ—¥æš®ä¹¡å…³ æœ‰é“äº‘ç¬”è®°](https://note.youdao.com/ynoteshare1/index.html?id=b2fab3b044aa90033395df0c8c9ca3a4&type=note)

[èœé¸Ÿæ•™ç¨‹ Javascriptæ•™ç¨‹](https://www.runoob.com/js/js-this.html)
